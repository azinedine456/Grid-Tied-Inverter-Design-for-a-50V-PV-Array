Version 4
SHEET 1 880 680
WIRE -1424 -864 -3936 -864
WIRE -1616 -704 -1648 -704
WIRE -1472 -704 -1536 -704
WIRE -3280 -688 -3280 -704
WIRE -3008 -688 -3008 -704
WIRE -2784 -688 -2784 -704
WIRE -2528 -688 -2528 -704
WIRE -608 -656 -608 -672
WIRE -3280 -640 -3280 -688
WIRE -3008 -640 -3008 -688
WIRE -2784 -640 -2784 -688
WIRE -1648 -640 -1648 -704
WIRE -2528 -624 -2528 -688
WIRE -880 -624 -1008 -624
WIRE -608 -624 -608 -656
WIRE -608 -624 -880 -624
WIRE -208 -624 -608 -624
WIRE -1008 -576 -1008 -624
WIRE -3008 -528 -3008 -560
WIRE -2784 -528 -2784 -560
WIRE -3280 -512 -3280 -560
WIRE -208 -512 -208 -624
WIRE -880 -496 -880 -624
WIRE -3008 -480 -3008 -528
WIRE -2784 -480 -2784 -528
WIRE -2528 -480 -2528 -544
WIRE -1648 -480 -1648 -560
WIRE -1008 -432 -1008 -512
WIRE -1552 -368 -1552 -432
WIRE -880 -352 -1008 -352
WIRE -3936 -320 -3936 -864
WIRE -1424 -320 -1424 -864
WIRE -1424 -320 -3936 -320
WIRE -1008 -320 -1008 -352
WIRE -768 -320 -1008 -320
WIRE -640 -320 -688 -320
WIRE -512 -320 -560 -320
WIRE -400 -320 -512 -320
WIRE -208 -320 -208 -448
WIRE -208 -320 -320 -320
WIRE -1008 -288 -1008 -320
WIRE -880 -288 -1008 -288
WIRE -1008 -272 -1008 -288
WIRE -1424 -256 -3936 -256
WIRE -208 -208 -208 -320
WIRE -2048 -192 -2096 -192
WIRE -2032 -192 -2048 -192
WIRE -1008 -192 -1008 -208
WIRE -2496 -176 -2640 -176
WIRE -2448 -176 -2496 -176
WIRE -2176 -176 -2352 -176
WIRE -2160 -176 -2176 -176
WIRE -880 -176 -880 -208
WIRE -3760 -160 -3760 -176
WIRE -3488 -160 -3488 -176
WIRE -3264 -160 -3264 -176
WIRE -2928 -160 -2992 -160
WIRE -2832 -160 -2864 -160
WIRE -3760 -144 -3760 -160
WIRE -3488 -144 -3488 -160
WIRE -3264 -144 -3264 -160
WIRE -2640 -144 -2640 -176
WIRE -2992 -128 -2992 -160
WIRE -880 -112 -1008 -112
WIRE -2176 -48 -2176 -176
WIRE -2016 -48 -2176 -48
WIRE -3760 -32 -3760 -64
WIRE -3488 -32 -3488 -64
WIRE -3264 -32 -3264 -64
WIRE -2640 -32 -2640 -64
WIRE -1792 -32 -1952 -32
WIRE -1712 -32 -1792 -32
WIRE -1008 -32 -1008 -112
WIRE -624 -32 -1008 -32
WIRE -208 -32 -208 -144
WIRE -208 -32 -624 -32
WIRE -2992 -16 -2992 -48
WIRE -624 48 -624 -32
WIRE -3760 64 -3760 48
WIRE -3760 96 -3760 64
WIRE -3760 208 -3760 176
WIRE -3936 288 -3936 -256
WIRE -1424 288 -1424 -256
WIRE -1424 288 -3936 288
FLAG -624 48 0
FLAG -608 -656 vpv
FLAG -512 -320 res
FLAG -1008 -320 sourceh1
FLAG -3280 -512 0
FLAG -3280 -688 vsupl
FLAG -3008 -688 vsuph1
FLAG -3008 -528 sourceh1
FLAG -1472 -704 vpv
FLAG -1648 -480 0
FLAG -2784 -688 vsuph3
FLAG -2784 -528 sourceh3
FLAG -1552 -432 cathode
FLAG -1552 -368 0
FLAG -2528 -480 0
FLAG -2528 -688 Vdrive
FLAG -2048 -192 vc1
FLAG -1792 -32 vc2
FLAG -2496 -176 mod
FLAG -3760 -160 ref
FLAG -3760 -32 0
FLAG -3488 -32 0
FLAG -3488 -160 mes
FLAG -3264 -32 0
FLAG -3264 -160 diff
FLAG -2992 -16 0
FLAG -2832 -160 sum
FLAG -2640 -32 0
FLAG -3760 208 0
FLAG -3760 64 tim
FLAG -208 -320 sourceh3
DATAFLAG -1008 -320 "$-V(res)"
SYMBOL res -1024 -448 R0
WINDOW 3 -329 58 Left 2
SYMATTR Value R=if(V(vc1)>0.5,Rdson,Roc)
SYMATTR InstName R1
SYMBOL res -1024 -208 R0
WINDOW 3 -338 55 Left 2
SYMATTR Value R=if(V(vc2)>0.5,Rdson,Roc)
SYMATTR InstName R2
SYMBOL ind -784 -304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lreseau1
SYMATTR Value {Lr}
SYMBOL res -544 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rreseau1
SYMATTR Value {Rr}
SYMBOL diode -864 -352 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value IDD
SYMBOL diode -864 -112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value IDD
SYMBOL voltage -880 -512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi1
SYMATTR Value 0
SYMBOL voltage -880 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi2
SYMATTR Value 0
SYMBOL diode -1024 -576 R0
SYMATTR InstName D5
SYMATTR Value IDI
SYMBOL diode -1024 -272 R0
SYMATTR InstName D6
SYMATTR Value IDI
SYMBOL voltage -3280 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupl1
SYMATTR Value 10
SYMBOL voltage -3008 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsuph1
SYMATTR Value 10
SYMBOL voltage -1648 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vpv1
SYMATTR Value 80
SYMBOL voltage -2784 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsuph2
SYMATTR Value 10
SYMBOL voltage -1632 -704 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName IDpv1
SYMATTR Value 0
SYMBOL voltage -2528 -640 R0
SYMATTR InstName Valimdriv1
SYMATTR Value 10
SYMBOL LTspiceControlLibrary\\PulseModulations\\PWM -2432 -144 R0
WINDOW 3 -127 7 Left 2
WINDOW 123 -158 -89 Left 2
SYMATTR Value Vin1=0 Vin2=1 Tperiod=1e-4
SYMATTR Value2 Tdelay=0 tripdt=Tdead
SYMATTR InstName U1
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -2160 -240 R0
SYMATTR InstName U2
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -2016 -112 R0
SYMATTR InstName U3
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL bv -3488 -160 R0
SYMATTR InstName B1
SYMATTR Value V=I(Lreseau1)
SYMBOL voltage -3760 -160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 9 50 0 0 0)
SYMBOL bv -3264 -160 R0
SYMATTR InstName B2
SYMATTR Value V=V(ref)-V(mes)
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Integral -2912 -128 R0
SYMATTR Value T=0.25e-5
SYMATTR InstName U4
SYMBOL bv -2992 -144 R0
WINDOW 3 -379 200 Left 2
SYMATTR Value V=if(  V(tim)>0.5,  if(V(diff)>hyst,step,    if(V(diff)<hyst,-step,0)    )      ,0     )
SYMATTR InstName B3
SYMBOL bv -2640 -160 R0
SYMATTR InstName B4
SYMATTR Value V=((V(sum)+V(res,sourceh3))/  (V(vpv)*0.5)   )*0.5 +0.5
SYMBOL voltage -3760 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 0 10p 10p 0.25e-5 0.5e-5)
SYMBOL cap -224 -512 R0
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL cap -224 -208 R0
SYMATTR InstName C2
SYMATTR Value {C}
SYMBOL voltage -416 -320 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vreseau1
SYMATTR Value SINE(0 35.35 50 0 0 0)
TEXT -992 80 Left 2 !.param Rdson=0.27  Roc=3e6 Rg=0.1 Rr=1µ Lr=2.4m C=30m hyst=1e-2 step=0.5 Tdead=3µ
TEXT -992 56 Left 2 !.tran 0 0.10 0.08 1e-6
TEXT -992 104 Left 2 !.model IDD D(Ron=Rdson Roff=1Meg Vfwd=0)
TEXT -992 128 Left 2 !.model IDI D(Ron=10e-4 Roff=1Meg Vfwd=0)
TEXT -3080 200 Left 7 ;Hysterisis Controller
TEXT -3744 -384 Left 7 ;Voltage sources (PV, Drive..etc)
