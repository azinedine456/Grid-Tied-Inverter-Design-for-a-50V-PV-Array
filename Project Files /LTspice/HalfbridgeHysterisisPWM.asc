Version 4
SHEET 1 2116 680
WIRE -896 -800 -3408 -800
WIRE 736 -720 736 -736
WIRE 624 -656 496 -656
WIRE 736 -656 736 -720
WIRE 736 -656 624 -656
WIRE 1120 -656 736 -656
WIRE -1088 -640 -1120 -640
WIRE -944 -640 -1008 -640
WIRE 496 -640 496 -656
WIRE -2752 -624 -2752 -640
WIRE -2480 -624 -2480 -640
WIRE -2256 -624 -2256 -640
WIRE -2000 -624 -2000 -640
WIRE -2752 -576 -2752 -624
WIRE -2480 -576 -2480 -624
WIRE -2256 -576 -2256 -624
WIRE -1120 -576 -1120 -640
WIRE -2000 -560 -2000 -624
WIRE 624 -560 624 -656
WIRE -96 -544 -288 -544
WIRE 16 -544 -16 -544
WIRE 240 -544 208 -544
WIRE 272 -544 272 -640
WIRE 272 -544 240 -544
WIRE 496 -544 496 -560
WIRE 240 -528 240 -544
WIRE 1120 -512 1120 -656
WIRE 208 -496 192 -496
WIRE 272 -496 208 -496
WIRE 304 -496 272 -496
WIRE 432 -496 384 -496
WIRE -2480 -464 -2480 -496
WIRE -2256 -464 -2256 -496
WIRE 432 -464 432 -496
WIRE 448 -464 432 -464
WIRE -2752 -448 -2752 -496
WIRE -288 -448 -288 -464
WIRE -48 -448 -288 -448
WIRE 16 -448 -48 -448
WIRE 240 -448 240 -464
WIRE 240 -448 208 -448
WIRE 256 -448 240 -448
WIRE -2480 -416 -2480 -464
WIRE -2256 -416 -2256 -464
WIRE -2000 -416 -2000 -480
WIRE -1120 -416 -1120 -496
WIRE 496 -416 496 -448
WIRE 624 -416 496 -416
WIRE 256 -352 256 -448
WIRE 464 -352 256 -352
WIRE 496 -352 496 -416
WIRE 496 -352 464 -352
WIRE 704 -352 496 -352
WIRE 832 -352 784 -352
WIRE 960 -352 912 -352
WIRE 992 -352 960 -352
WIRE 1120 -352 1120 -448
WIRE 1120 -352 1072 -352
WIRE 1184 -352 1120 -352
WIRE -1024 -304 -1024 -368
WIRE 496 -288 496 -352
WIRE 608 -288 496 -288
WIRE -3408 -256 -3408 -800
WIRE -896 -256 -896 -800
WIRE -896 -256 -3408 -256
WIRE 496 -240 496 -288
WIRE -896 -192 -3408 -192
WIRE -1520 -128 -1568 -128
WIRE -1504 -128 -1520 -128
WIRE 608 -128 608 -288
WIRE -1968 -112 -2112 -112
WIRE -1920 -112 -1968 -112
WIRE -1648 -112 -1824 -112
WIRE -1632 -112 -1648 -112
WIRE -112 -112 -288 -112
WIRE 0 -112 -32 -112
WIRE 224 -112 192 -112
WIRE 256 -112 256 -208
WIRE 256 -112 224 -112
WIRE 496 -112 496 -160
WIRE -3232 -96 -3232 -112
WIRE -2960 -96 -2960 -112
WIRE -2736 -96 -2736 -112
WIRE -2400 -96 -2464 -96
WIRE -2304 -96 -2336 -96
WIRE 224 -96 224 -112
WIRE 1120 -96 1120 -352
WIRE -3232 -80 -3232 -96
WIRE -2960 -80 -2960 -96
WIRE -2736 -80 -2736 -96
WIRE -2112 -80 -2112 -112
WIRE -2464 -64 -2464 -96
WIRE 192 -64 176 -64
WIRE 272 -64 192 -64
WIRE 288 -64 272 -64
WIRE 432 -64 368 -64
WIRE 432 -32 432 -64
WIRE 448 -32 432 -32
WIRE -288 -16 -288 -32
WIRE -48 -16 -288 -16
WIRE 0 -16 -48 -16
WIRE 224 -16 224 -32
WIRE 224 -16 192 -16
WIRE 240 -16 224 -16
WIRE -1648 16 -1648 -112
WIRE -1488 16 -1648 16
WIRE 496 16 496 -16
WIRE 608 16 496 16
WIRE -3232 32 -3232 0
WIRE -2960 32 -2960 0
WIRE -2736 32 -2736 0
WIRE -2112 32 -2112 0
WIRE -1264 32 -1424 32
WIRE -1184 32 -1264 32
WIRE -2464 48 -2464 16
WIRE 240 80 240 -16
WIRE 496 80 496 16
WIRE 496 80 240 80
WIRE 752 80 496 80
WIRE 1120 80 1120 -32
WIRE 1120 80 752 80
WIRE -3232 128 -3232 112
WIRE -3232 160 -3232 128
WIRE 752 160 752 80
WIRE -3232 272 -3232 240
WIRE -3408 352 -3408 -192
WIRE -896 352 -896 -192
WIRE -896 352 -3408 352
FLAG 752 160 0
FLAG -2752 -448 0
FLAG -2752 -624 vsupl
FLAG 272 -640 vsuph1
FLAG 256 -208 vsupl
FLAG -2480 -624 vsuph1
FLAG -2480 -464 sourceh1
FLAG 464 -352 sourceh1
FLAG 1184 -352 sourceh3
FLAG -944 -640 vpv
FLAG -1120 -416 0
FLAG 736 -720 vpv
FLAG -2256 -624 vsuph3
FLAG -2256 -464 sourceh3
FLAG 272 -496 o1
FLAG 272 -64 o2
FLAG -48 -448 cathode
FLAG -48 -16 cathode
FLAG -1024 -368 cathode
FLAG -1024 -304 0
FLAG 960 -352 res
FLAG -2000 -416 0
FLAG -2000 -624 Vdrive
FLAG -1520 -128 vc1
FLAG -1264 32 vc2
FLAG -1968 -112 mod
FLAG -3232 -96 ref
FLAG -3232 32 0
FLAG -2960 32 0
FLAG -2960 -96 mes
FLAG -2736 32 0
FLAG -2736 -96 diff
FLAG -2464 48 0
FLAG -2304 -96 sum
FLAG -2112 32 0
FLAG -3232 272 0
FLAG -3232 128 tim
SYMBOL TLP5702 112 -496 R0
SYMATTR InstName U1
SYMBOL res 400 -512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rg1
SYMATTR Value {Rg}
SYMBOL res 0 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin1
SYMATTR Value {Rin}
SYMBOL TLP5702 96 -64 R0
SYMATTR InstName U2
SYMBOL res 384 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rg2
SYMATTR Value {Rg}
SYMBOL res -16 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin2
SYMATTR Value {Rin}
SYMBOL voltage -2752 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupl1
SYMATTR Value 10
SYMBOL voltage -2480 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsuph1
SYMATTR Value 10
SYMBOL cap 224 -528 R0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL cap 208 -96 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL voltage -1120 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vpv1
SYMATTR Value 80
SYMBOL voltage -2256 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsuph2
SYMATTR Value 10
SYMBOL irf520n 448 -544 R0
SYMATTR InstName U5
SYMBOL irf520n 448 -112 R0
SYMATTR InstName U6
SYMBOL bv -288 -560 R0
WINDOW 3 13 137 Left 2
SYMATTR Value V=V(vc1)*V(Vdrive)
SYMATTR InstName B1
SYMBOL bv -288 -128 R0
WINDOW 3 -3 138 Left 2
SYMATTR Value V=V(vc2)*V(Vdrive)
SYMATTR InstName B2
SYMBOL voltage 976 -352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vreseau1
SYMATTR Value SINE(0 35.35 50 0 0 0)
SYMBOL ind 688 -336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lreseau1
SYMATTR Value {Lr}
SYMBOL voltage 496 -656 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName ID1
SYMATTR Value 0
SYMBOL voltage 496 -256 R0
SYMATTR InstName ID2
SYMATTR Value 0
SYMBOL res 928 -368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rreseau1
SYMATTR Value {Rr}
SYMBOL diode 640 -416 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL diode 624 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4007
SYMBOL voltage -1104 -640 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName IDpv1
SYMATTR Value 0
SYMBOL voltage 624 -576 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi1
SYMATTR Value 0
SYMBOL voltage 608 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi2
SYMATTR Value 0
SYMBOL voltage -2000 -576 R0
SYMATTR InstName Valimdriv1
SYMATTR Value 10
SYMBOL LTspiceControlLibrary\\PulseModulations\\PWM -1904 -80 R0
WINDOW 3 -127 7 Left 2
WINDOW 123 -158 -89 Left 2
SYMATTR Value Vin1=0 Vin2=1 Tperiod=1e-4
SYMATTR Value2 Tdelay=0 tripdt=Tdead
SYMATTR InstName U9
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -1632 -176 R0
SYMATTR InstName U10
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -1488 -48 R0
SYMATTR InstName U11
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL bv -2960 -96 R0
SYMATTR InstName B5
SYMATTR Value V=I(Lreseau1)
SYMBOL voltage -3232 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 9 50 0 0 0)
SYMBOL bv -2736 -96 R0
SYMATTR InstName B6
SYMATTR Value V=V(ref)-V(mes)
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Integral -2384 -64 R0
SYMATTR Value T=2e-4
SYMATTR InstName U12
SYMBOL bv -2464 -80 R0
WINDOW 3 -379 200 Left 2
SYMATTR Value V=if(  V(tim)>0.5,  if(V(diff)>hyst,step,    if(V(diff)<hyst,-step,0)    )      ,0     )
SYMATTR InstName B7
SYMBOL bv -2112 -96 R0
SYMATTR InstName B8
SYMATTR Value V=((V(sum)+V(res,sourceh3))/ (V(vpv) *0.5 ) )*0.5 +0.5
SYMBOL voltage -3232 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 0 10p 10p 2e-4 4e-4)
SYMBOL cap 1104 -96 R0
SYMATTR InstName C3
SYMATTR Value {C}
SYMBOL cap 1104 -512 R0
SYMATTR InstName C4
SYMATTR Value {C}
TEXT -336 408 Left 2 !.lib C:\\Users\\ZinouAb\\Downloads\\TLP5702_LTspice_20190327\\TLP5702.mod
TEXT -336 456 Left 2 !.tran 0 0.08 0.06 1e-6
TEXT -336 496 Left 2 !.param Rin=1000 Rg=10 Rr=1m Lr=2.4m C = 11.69m hyst=1e-2 step=5 Tdead=3µ
TEXT -336 432 Left 2 !.lib C:\\Users\\ZinouAb\\Downloads\\TLP5702_LTspice_20190327\\irf520n.lib
TEXT -336 480 Left 2 !.model IDI D(Ron=10e-3 Roff=1Meg Vfwd=0)
TEXT -2552 264 Left 7 ;Hysterisis Controller
TEXT -3216 -320 Left 7 ;Voltage sources (PV, Drive..etc)
