Version 4
SHEET 1 1144 1076
WIRE -1696 -640 -4208 -640
WIRE -1888 -480 -1920 -480
WIRE -1744 -480 -1808 -480
WIRE -3552 -464 -3552 -480
WIRE -3280 -464 -3280 -480
WIRE -3056 -464 -3056 -480
WIRE -2800 -464 -2800 -480
WIRE -880 -432 -880 -448
WIRE -3552 -416 -3552 -464
WIRE -3280 -416 -3280 -464
WIRE -3056 -416 -3056 -464
WIRE -1920 -416 -1920 -480
WIRE -2800 -400 -2800 -464
WIRE -1152 -400 -1280 -400
WIRE -880 -400 -880 -432
WIRE -880 -400 -1152 -400
WIRE -576 -400 -880 -400
WIRE -480 -400 -576 -400
WIRE -1280 -352 -1280 -400
WIRE -480 -352 -480 -400
WIRE -3280 -304 -3280 -336
WIRE -3056 -304 -3056 -336
WIRE -3552 -288 -3552 -336
WIRE -1152 -272 -1152 -400
WIRE -3280 -256 -3280 -304
WIRE -3056 -256 -3056 -304
WIRE -2800 -256 -2800 -320
WIRE -1920 -256 -1920 -336
WIRE -480 -224 -480 -288
WIRE -1280 -208 -1280 -288
WIRE -576 -192 -576 -400
WIRE -1824 -144 -1824 -208
WIRE -1152 -128 -1280 -128
WIRE -480 -128 -480 -144
WIRE -480 -128 -576 -128
WIRE -4208 -96 -4208 -640
WIRE -1696 -96 -1696 -640
WIRE -1696 -96 -4208 -96
WIRE -1280 -96 -1280 -128
WIRE -1040 -96 -1280 -96
WIRE -912 -96 -960 -96
WIRE -784 -96 -832 -96
WIRE -752 -96 -784 -96
WIRE -480 -96 -480 -128
WIRE -480 -96 -672 -96
WIRE -1280 -64 -1280 -96
WIRE -1152 -64 -1280 -64
WIRE -480 -64 -480 -96
WIRE -480 -64 -576 -64
WIRE -1280 -48 -1280 -64
WIRE -480 -48 -480 -64
WIRE -1696 -32 -4208 -32
WIRE -576 0 -576 -64
WIRE -2320 32 -2368 32
WIRE -2304 32 -2320 32
WIRE -1280 32 -1280 16
WIRE -2768 48 -2912 48
WIRE -2720 48 -2768 48
WIRE -2448 48 -2624 48
WIRE -2432 48 -2448 48
WIRE -1152 48 -1152 16
WIRE -4032 64 -4032 48
WIRE -3760 64 -3760 48
WIRE -3536 64 -3536 48
WIRE -3200 64 -3264 64
WIRE -3104 64 -3136 64
WIRE -4032 80 -4032 64
WIRE -3760 80 -3760 64
WIRE -3536 80 -3536 64
WIRE -2912 80 -2912 48
WIRE -3264 96 -3264 64
WIRE -1152 112 -1280 112
WIRE -576 112 -576 64
WIRE -480 112 -480 96
WIRE -480 112 -576 112
WIRE -2448 176 -2448 48
WIRE -2288 176 -2448 176
WIRE -4032 192 -4032 160
WIRE -3760 192 -3760 160
WIRE -3536 192 -3536 160
WIRE -2912 192 -2912 160
WIRE -2064 192 -2224 192
WIRE -1984 192 -2064 192
WIRE -1280 192 -1280 112
WIRE -896 192 -1280 192
WIRE -480 192 -480 112
WIRE -480 192 -896 192
WIRE -3264 208 -3264 176
WIRE -896 272 -896 192
WIRE -4032 288 -4032 272
WIRE -4032 320 -4032 288
WIRE -4032 432 -4032 400
WIRE -4208 512 -4208 -32
WIRE -1696 512 -1696 -32
WIRE -1696 512 -4208 512
FLAG -896 272 0
FLAG -880 -432 vpv
FLAG -784 -96 res
FLAG -1280 -96 sourceh1
FLAG -480 -96 sourceh3
FLAG -3552 -288 0
FLAG -3552 -464 vsupl
FLAG -3280 -464 vsuph1
FLAG -3280 -304 sourceh1
FLAG -1744 -480 vpv
FLAG -1920 -256 0
FLAG -3056 -464 vsuph3
FLAG -3056 -304 sourceh3
FLAG -1824 -208 cathode
FLAG -1824 -144 0
FLAG -2800 -256 0
FLAG -2800 -464 Vdrive
FLAG -2320 32 vc1
FLAG -2064 192 vc2
FLAG -2768 48 mod
FLAG -4032 64 ref
FLAG -4032 192 0
FLAG -3760 192 0
FLAG -3760 64 mes
FLAG -3536 192 0
FLAG -3536 64 diff
FLAG -3264 208 0
FLAG -3104 64 sum
FLAG -2912 192 0
FLAG -4032 432 0
FLAG -4032 288 tim
SYMBOL res -1296 -224 R0
WINDOW 3 -329 58 Left 2
SYMATTR Value R=if(V(vc1)>0.5,Rdson,Roc)
SYMATTR InstName R1
SYMBOL res -1296 16 R0
WINDOW 3 -338 55 Left 2
SYMATTR Value R=if(V(vc2)>0.5,Rdson,Roc)
SYMATTR InstName R2
SYMBOL res -496 -240 R0
SYMATTR InstName R3
SYMATTR Value R=if(V(vc2)>0.5,Rdson,Roc)
SYMBOL res -496 0 R0
SYMATTR InstName R4
SYMATTR Value R=if(V(vc1)>0.5,Rdson,Roc)
SYMBOL voltage -768 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vreseau1
SYMATTR Value SINE(0 70.71 50 0 0 0)
SYMBOL ind -1056 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lreseau1
SYMATTR Value {Lr}
SYMBOL res -816 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rreseau1
SYMATTR Value {Rr}
SYMBOL diode -560 -128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value IDD
SYMBOL diode -560 64 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value IDD
SYMBOL diode -1136 -128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value IDD
SYMBOL diode -1136 112 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value IDD
SYMBOL voltage -1152 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi1
SYMATTR Value 0
SYMBOL voltage -1152 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi2
SYMATTR Value 0
SYMBOL diode -1296 -352 R0
SYMATTR InstName D5
SYMATTR Value IDI
SYMBOL diode -1296 -48 R0
SYMATTR InstName D6
SYMATTR Value IDI
SYMBOL diode -496 -48 R0
SYMATTR InstName D7
SYMATTR Value IDI
SYMBOL diode -496 -352 R0
SYMATTR InstName D8
SYMATTR Value IDI
SYMBOL voltage -3552 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupl1
SYMATTR Value 10
SYMBOL voltage -3280 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsuph1
SYMATTR Value 10
SYMBOL voltage -1920 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vpv1
SYMATTR Value 80
SYMBOL voltage -3056 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsuph2
SYMATTR Value 10
SYMBOL voltage -1904 -480 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName IDpv1
SYMATTR Value 0
SYMBOL voltage -2800 -416 R0
SYMATTR InstName Valimdriv1
SYMATTR Value 10
SYMBOL LTspiceControlLibrary\\PulseModulations\\PWM -2704 80 R0
WINDOW 3 -127 7 Left 2
WINDOW 123 -158 -89 Left 2
SYMATTR Value Vin1=0 Vin2=1 Tperiod=1e-4
SYMATTR Value2 Tdelay=0 tripdt=Tdead
SYMATTR InstName U1
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -2432 -16 R0
SYMATTR InstName U2
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -2288 112 R0
SYMATTR InstName U3
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL bv -3760 64 R0
SYMATTR InstName B1
SYMATTR Value V=I(Lreseau1)
SYMBOL voltage -4032 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 9 50 0 0 0)
SYMBOL bv -3536 64 R0
SYMATTR InstName B2
SYMATTR Value V=V(ref)-V(mes)
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Integral -3184 96 R0
SYMATTR Value T=0.25e-5
SYMATTR InstName U4
SYMBOL bv -3264 80 R0
WINDOW 3 -379 200 Left 2
SYMATTR Value V=if(  V(tim)>0.5,  if(V(diff)>hyst,step,    if(V(diff)<hyst,-step,0)    )      ,0     )
SYMATTR InstName B3
SYMBOL bv -2912 64 R0
SYMATTR InstName B4
SYMATTR Value V=((V(sum)+V(res,sourceh3))/V(vpv))*0.5 +0.5
SYMBOL voltage -4032 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 0 10p 10p 0.25e-5 0.5e-5)
TEXT -1264 304 Left 2 !.param Rdson=0.27 Roc=3e6 Rg=0.1 Rr=1m Lr=2.4m hyst=1e-2 step=0.5 Tdead=3µ
TEXT -1264 280 Left 2 !.tran 0 0.10 0.08 1e-6
TEXT -1264 328 Left 2 !.model IDD D(Ron=Rdson Roff=1Meg Vfwd=0)
TEXT -1264 352 Left 2 !.model IDI D(Ron=10e-4 Roff=1Meg Vfwd=0)
TEXT -3352 424 Left 7 ;Hysterisis Controller
TEXT -4016 -160 Left 7 ;Voltage sources (PV, Drive..etc)
