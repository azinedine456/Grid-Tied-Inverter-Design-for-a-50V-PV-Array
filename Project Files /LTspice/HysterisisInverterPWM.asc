Version 4
SHEET 1 2704 1140
WIRE -960 -512 -3472 -512
WIRE 672 -432 672 -448
WIRE 560 -368 432 -368
WIRE 672 -368 672 -432
WIRE 672 -368 560 -368
WIRE 1056 -368 672 -368
WIRE -1152 -352 -1184 -352
WIRE -1008 -352 -1072 -352
WIRE 432 -352 432 -368
WIRE -2816 -336 -2816 -352
WIRE -2544 -336 -2544 -352
WIRE -2320 -336 -2320 -352
WIRE -2064 -336 -2064 -352
WIRE -2816 -288 -2816 -336
WIRE -2544 -288 -2544 -336
WIRE -2320 -288 -2320 -336
WIRE -1184 -288 -1184 -352
WIRE -2064 -272 -2064 -336
WIRE 560 -272 560 -368
WIRE 1056 -272 1056 -368
WIRE 1056 -272 944 -272
WIRE -160 -256 -352 -256
WIRE -48 -256 -80 -256
WIRE 176 -256 144 -256
WIRE 208 -256 208 -352
WIRE 208 -256 176 -256
WIRE 432 -256 432 -272
WIRE 1056 -256 1056 -272
WIRE 1280 -256 1280 -352
WIRE 1312 -256 1280 -256
WIRE 1344 -256 1312 -256
WIRE 1568 -256 1536 -256
WIRE 1792 -256 1648 -256
WIRE 176 -240 176 -256
WIRE 944 -240 944 -272
WIRE 1312 -240 1312 -256
WIRE 144 -208 128 -208
WIRE 208 -208 144 -208
WIRE 240 -208 208 -208
WIRE 368 -208 320 -208
WIRE 1168 -208 1120 -208
WIRE 1264 -208 1248 -208
WIRE 1344 -208 1264 -208
WIRE 1360 -208 1344 -208
WIRE -2544 -176 -2544 -208
WIRE -2320 -176 -2320 -208
WIRE 368 -176 368 -208
WIRE 384 -176 368 -176
WIRE 1120 -176 1120 -208
WIRE 1120 -176 1104 -176
WIRE -2816 -160 -2816 -208
WIRE -352 -160 -352 -176
WIRE -112 -160 -352 -160
WIRE -48 -160 -112 -160
WIRE 176 -160 176 -176
WIRE 176 -160 144 -160
WIRE 192 -160 176 -160
WIRE 1312 -160 1312 -176
WIRE 1312 -160 1296 -160
WIRE 1344 -160 1312 -160
WIRE 1648 -160 1536 -160
WIRE 1792 -160 1792 -176
WIRE 1792 -160 1648 -160
WIRE 944 -144 944 -176
WIRE 1056 -144 1056 -160
WIRE 1056 -144 944 -144
WIRE -2544 -128 -2544 -176
WIRE -2320 -128 -2320 -176
WIRE -2064 -128 -2064 -192
WIRE -1184 -128 -1184 -208
WIRE 432 -128 432 -160
WIRE 560 -128 432 -128
WIRE 192 -64 192 -160
WIRE 400 -64 192 -64
WIRE 432 -64 432 -128
WIRE 432 -64 400 -64
WIRE 640 -64 432 -64
WIRE 768 -64 720 -64
WIRE 896 -64 848 -64
WIRE 928 -64 896 -64
WIRE 1056 -64 1056 -144
WIRE 1056 -64 1008 -64
WIRE 1120 -64 1056 -64
WIRE 1296 -64 1296 -160
WIRE 1296 -64 1120 -64
WIRE -1088 -16 -1088 -80
WIRE 432 0 432 -64
WIRE 544 0 432 0
WIRE -3472 32 -3472 -512
WIRE -960 32 -960 -512
WIRE -960 32 -3472 32
WIRE 432 48 432 0
WIRE -960 96 -3472 96
WIRE -1584 160 -1632 160
WIRE -1568 160 -1584 160
WIRE 544 160 544 0
WIRE 1056 160 1056 -64
WIRE 1056 160 944 160
WIRE 1296 160 1296 64
WIRE 1328 160 1296 160
WIRE 1360 160 1328 160
WIRE 1584 160 1552 160
WIRE 1760 160 1664 160
WIRE -2032 176 -2176 176
WIRE -1984 176 -2032 176
WIRE -1712 176 -1888 176
WIRE -1696 176 -1712 176
WIRE -176 176 -352 176
WIRE -64 176 -96 176
WIRE 160 176 128 176
WIRE 192 176 192 80
WIRE 192 176 160 176
WIRE 432 176 432 128
WIRE 1328 176 1328 160
WIRE -3296 192 -3296 176
WIRE -3024 192 -3024 176
WIRE -2800 192 -2800 176
WIRE -2464 192 -2528 192
WIRE -2368 192 -2400 192
WIRE 160 192 160 176
WIRE 944 192 944 160
WIRE -3296 208 -3296 192
WIRE -3024 208 -3024 192
WIRE -2800 208 -2800 192
WIRE -2176 208 -2176 176
WIRE 1184 208 1136 208
WIRE 1280 208 1264 208
WIRE 1360 208 1280 208
WIRE 1376 208 1360 208
WIRE -2528 224 -2528 192
WIRE 128 224 112 224
WIRE 208 224 128 224
WIRE 224 224 208 224
WIRE 368 224 304 224
WIRE 1136 240 1136 208
WIRE 1136 240 1104 240
WIRE 368 256 368 224
WIRE 384 256 368 256
WIRE 1328 256 1328 240
WIRE 1328 256 1296 256
WIRE 1360 256 1328 256
WIRE 1584 256 1552 256
WIRE -352 272 -352 256
WIRE -112 272 -352 272
WIRE -64 272 -112 272
WIRE 160 272 160 256
WIRE 160 272 128 272
WIRE 176 272 160 272
WIRE 1584 272 1584 256
WIRE 1632 272 1584 272
WIRE 1760 272 1760 240
WIRE 1760 272 1632 272
WIRE 944 288 944 256
WIRE 1056 288 1056 256
WIRE 1056 288 944 288
WIRE -1712 304 -1712 176
WIRE -1552 304 -1712 304
WIRE 432 304 432 272
WIRE 544 304 432 304
WIRE -3296 320 -3296 288
WIRE -3024 320 -3024 288
WIRE -2800 320 -2800 288
WIRE -2176 320 -2176 288
WIRE -1328 320 -1488 320
WIRE -1248 320 -1328 320
WIRE -2528 336 -2528 304
WIRE 176 368 176 272
WIRE 432 368 432 304
WIRE 432 368 176 368
WIRE 688 368 432 368
WIRE 1056 368 1056 288
WIRE 1056 368 688 368
WIRE 1296 368 1296 256
WIRE 1296 368 1056 368
WIRE -3296 416 -3296 400
WIRE -3296 448 -3296 416
WIRE 688 448 688 368
WIRE -3296 560 -3296 528
WIRE -3472 640 -3472 96
WIRE -960 640 -960 96
WIRE -960 640 -3472 640
FLAG 688 448 0
FLAG -2816 -160 0
FLAG -2816 -336 vsupl
FLAG 208 -352 vsuph1
FLAG 192 80 vsupl
FLAG 1296 64 vsupl
FLAG 1280 -352 vsuph3
FLAG -2544 -336 vsuph1
FLAG -2544 -176 sourceh1
FLAG 400 -64 sourceh1
FLAG 1120 -64 sourceh3
FLAG -1008 -352 vpv
FLAG -1184 -128 0
FLAG 672 -432 vpv
FLAG -2320 -336 vsuph3
FLAG -2320 -176 sourceh3
FLAG 208 -208 o1
FLAG 208 224 o2
FLAG 1280 208 o4
FLAG 1264 -208 o3
FLAG -112 -160 cathode
FLAG -112 272 cathode
FLAG 1632 272 cathode
FLAG 1648 -160 cathode
FLAG -1088 -80 cathode
FLAG -1088 -16 0
FLAG 896 -64 res
FLAG -2064 -128 0
FLAG -2064 -336 Vdrive
FLAG -1584 160 vc1
FLAG -1328 320 vc2
FLAG -2032 176 mod
FLAG -3296 192 ref
FLAG -3296 320 0
FLAG -3024 320 0
FLAG -3024 192 mes
FLAG -2800 320 0
FLAG -2800 192 diff
FLAG -2528 336 0
FLAG -2368 192 sum
FLAG -2176 320 0
FLAG -3296 560 0
FLAG -3296 416 tim
SYMBOL TLP5702 48 -208 R0
SYMATTR InstName U1
SYMBOL res 336 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rg1
SYMATTR Value {Rg}
SYMBOL res -64 -272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin1
SYMATTR Value {Rin}
SYMBOL TLP5702 32 224 R0
SYMATTR InstName U2
SYMBOL res 320 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rg2
SYMATTR Value {Rg}
SYMBOL res -80 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin2
SYMATTR Value {Rin}
SYMBOL TLP5702 1440 -208 M0
SYMATTR InstName U3
SYMBOL res 1152 -224 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rg3
SYMATTR Value {Rg}
SYMBOL res 1552 -272 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin3
SYMATTR Value {Rin}
SYMBOL TLP5702 1456 208 M0
SYMATTR InstName U4
SYMBOL res 1168 192 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rg4
SYMATTR Value {Rg}
SYMBOL res 1568 144 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin4
SYMATTR Value {Rin}
SYMBOL voltage -2816 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupl1
SYMATTR Value 10
SYMBOL voltage -2544 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsuph1
SYMATTR Value 10
SYMBOL cap 160 -240 R0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL cap 144 192 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL cap 1296 -240 R0
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMBOL cap 1312 176 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMBOL voltage -1184 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vpv1
SYMATTR Value 80
SYMBOL voltage -2320 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsuph2
SYMATTR Value 10
SYMBOL irf520n 384 -256 R0
SYMATTR InstName U5
SYMBOL irf520n 384 176 R0
SYMATTR InstName U6
SYMBOL irf520n 1104 -256 M0
SYMATTR InstName U7
SYMBOL irf520n 1104 160 M0
SYMATTR InstName U8
SYMBOL bv -352 -272 R0
WINDOW 3 13 137 Left 2
SYMATTR Value V=V(vc1)*V(Vdrive)
SYMATTR InstName B1
SYMBOL bv -352 160 R0
WINDOW 3 -3 138 Left 2
SYMATTR Value V=V(vc2)*V(Vdrive)
SYMATTR InstName B2
SYMBOL bv 1792 -272 R0
SYMATTR InstName B3
SYMATTR Value V=V(vc2)*V(Vdrive)
SYMBOL bv 1760 144 R0
SYMATTR InstName B4
SYMATTR Value V=V(vc1)*V(Vdrive)
SYMBOL voltage 912 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vreseau1
SYMATTR Value SINE(0 70.71 50 0 0 0)
SYMBOL ind 624 -48 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lreseau1
SYMATTR Value {Lr}
SYMBOL voltage 432 -368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName ID1
SYMATTR Value 0
SYMBOL voltage 432 32 R0
SYMATTR InstName ID2
SYMATTR Value 0
SYMBOL res 864 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rreseau1
SYMATTR Value {Rr}
SYMBOL diode 576 -128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL diode 560 304 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N4007
SYMBOL diode 960 -176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N4007
SYMBOL diode 960 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N4007
SYMBOL voltage -1168 -352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName IDpv1
SYMATTR Value 0
SYMBOL voltage 560 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi1
SYMATTR Value 0
SYMBOL voltage 544 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi2
SYMATTR Value 0
SYMBOL voltage -2064 -288 R0
SYMATTR InstName Valimdriv1
SYMATTR Value 10
SYMBOL LTspiceControlLibrary\\PulseModulations\\PWM -1968 208 R0
WINDOW 3 -127 7 Left 2
WINDOW 123 -158 -89 Left 2
SYMATTR Value Vin1=0 Vin2=1 Tperiod=1e-4
SYMATTR Value2 Tdelay=0 tripdt=Tdead
SYMATTR InstName U12
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -1696 112 R0
SYMATTR InstName U13
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -1552 240 R0
SYMATTR InstName U14
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL bv -3024 192 R0
SYMATTR InstName B6
SYMATTR Value V=I(Lreseau1)
SYMBOL voltage -3296 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 9 50 0 0 0)
SYMBOL bv -2800 192 R0
SYMATTR InstName B7
SYMATTR Value V=V(ref)-V(mes)
SYMBOL LTspiceControlLibrary\\TransferFunctions\\Integral -2448 224 R0
SYMATTR Value T=2e-4
SYMATTR InstName U15
SYMBOL bv -2528 208 R0
WINDOW 3 -379 200 Left 2
SYMATTR Value V=if(  V(tim)>0.5,  if(V(diff)>hyst,step,    if(V(diff)<hyst,-step,0)    )      ,0     )
SYMATTR InstName B8
SYMBOL bv -2176 192 R0
SYMATTR InstName B9
SYMATTR Value V=((V(sum)+V(res,sourceh3))/V(vpv))*0.5 +0.5
SYMBOL voltage -3296 432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 0 10p 10p 2e-4 4e-4)
TEXT -400 696 Left 2 !.lib C:\\Users\\ZinouAb\\Downloads\\TLP5702_LTspice_20190327\\TLP5702.mod
TEXT -400 744 Left 2 !.tran 0 0.08 0.06 1e-6
TEXT -400 784 Left 2 !.param Rin=1000 Rg=10 Rr=1m Lr=2.4m hyst=1e-2 step=5 Tdead=3µ
TEXT -400 720 Left 2 !.lib C:\\Users\\ZinouAb\\Downloads\\TLP5702_LTspice_20190327\\irf520n.lib
TEXT -400 768 Left 2 !.model IDI D(Ron=10e-3 Roff=1Meg Vfwd=0)
TEXT -2616 552 Left 7 ;Hysterisis Controller
TEXT -3280 -32 Left 7 ;Voltage sources (PV, Drive..etc)
