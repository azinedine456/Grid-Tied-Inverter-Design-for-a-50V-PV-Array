Version 4
SHEET 1 880 772
WIRE -3216 -976 -5728 -976
WIRE -3408 -816 -3440 -816
WIRE -3264 -816 -3328 -816
WIRE -4320 -800 -4320 -816
WIRE -3440 -752 -3440 -816
WIRE -4320 -736 -4320 -800
WIRE -1056 -736 -1056 -752
WIRE -1328 -704 -1456 -704
WIRE -1056 -704 -1056 -736
WIRE -1056 -704 -1328 -704
WIRE -752 -704 -1056 -704
WIRE -656 -704 -752 -704
WIRE -1456 -656 -1456 -704
WIRE -656 -656 -656 -704
WIRE -4320 -592 -4320 -656
WIRE -3440 -592 -3440 -672
WIRE -1328 -576 -1328 -704
WIRE -656 -528 -656 -592
WIRE -1456 -512 -1456 -592
WIRE -752 -496 -752 -704
WIRE -3344 -480 -3344 -544
WIRE -5728 -432 -5728 -976
WIRE -3216 -432 -3216 -976
WIRE -3216 -432 -5728 -432
WIRE -1328 -432 -1456 -432
WIRE -656 -432 -656 -448
WIRE -656 -432 -752 -432
WIRE -1456 -400 -1456 -432
WIRE -1216 -400 -1456 -400
WIRE -1088 -400 -1136 -400
WIRE -960 -400 -1008 -400
WIRE -880 -400 -960 -400
WIRE -656 -400 -656 -432
WIRE -656 -400 -800 -400
WIRE -3216 -368 -5728 -368
WIRE -1456 -368 -1456 -400
WIRE -1328 -368 -1456 -368
WIRE -656 -368 -656 -400
WIRE -656 -368 -752 -368
WIRE -1456 -352 -1456 -368
WIRE -656 -352 -656 -368
WIRE -752 -304 -752 -368
WIRE -1456 -272 -1456 -288
WIRE -1328 -256 -1328 -288
WIRE -4448 -224 -4448 -288
WIRE -4336 -224 -4448 -224
WIRE -1328 -192 -1456 -192
WIRE -752 -192 -752 -240
WIRE -656 -192 -656 -208
WIRE -656 -192 -752 -192
WIRE -4448 -176 -4448 -224
WIRE -4336 -112 -4336 -224
WIRE -1456 -112 -1456 -192
WIRE -1072 -112 -1456 -112
WIRE -656 -112 -656 -192
WIRE -656 -112 -1072 -112
WIRE -5120 -96 -5312 -96
WIRE -5088 -96 -5120 -96
WIRE -4800 -80 -4912 -80
WIRE -4544 -80 -4800 -80
WIRE -5312 -64 -5312 -96
WIRE -4912 -48 -4912 -80
WIRE -4544 -48 -4544 -80
WIRE -4528 -48 -4544 -48
WIRE -4160 -48 -4208 -48
WIRE -4144 -48 -4160 -48
WIRE -4336 -32 -4368 -32
WIRE -4288 -32 -4336 -32
WIRE -4272 -32 -4288 -32
WIRE -1072 -32 -1072 -112
WIRE -4624 16 -4736 16
WIRE -4528 16 -4624 16
WIRE -5312 48 -5312 16
WIRE -4736 48 -4736 16
WIRE -4912 64 -4912 32
WIRE -4288 96 -4288 -32
WIRE -4128 96 -4288 96
WIRE -3904 112 -4064 112
WIRE -3824 112 -3904 112
WIRE -4400 128 -4400 96
WIRE -4496 144 -4496 96
WIRE -4736 160 -4736 128
WIRE -4400 224 -4400 208
WIRE -4496 256 -4496 224
WIRE -5728 384 -5728 -368
WIRE -3216 384 -3216 -368
WIRE -3216 384 -5728 384
FLAG -1072 -32 0
FLAG -1056 -736 vpv
FLAG -960 -400 res
FLAG -1456 -400 sourceh1
FLAG -656 -400 sourceh3
FLAG -4800 -80 ref
FLAG -4912 64 0
FLAG -4736 160 0
FLAG -4624 16 mes
FLAG -5312 48 0
FLAG -5120 -96 diff
FLAG -4400 224 0
FLAG -4160 -48 vc1
FLAG -3904 112 vc2
FLAG -4448 -288 Vdrive
FLAG -4496 256 0
FLAG -3264 -816 vpv
FLAG -3440 -592 0
FLAG -3344 -544 cathode
FLAG -3344 -480 0
FLAG -4320 -592 0
FLAG -4320 -800 Vdrive
SYMBOL res -1472 -528 R0
WINDOW 3 -329 58 Left 2
SYMATTR Value R=if(V(vc1)>0.5,Rdson,Roc)
SYMATTR InstName R1
SYMBOL res -1472 -288 R0
WINDOW 3 -338 55 Left 2
SYMATTR Value R=if(V(vc2)>0.5,Rdson,Roc)
SYMATTR InstName R2
SYMBOL res -672 -544 R0
SYMATTR InstName R3
SYMATTR Value R=if(V(vc2)>0.5,Rdson,Roc)
SYMBOL res -672 -304 R0
SYMATTR InstName R4
SYMATTR Value R=if(V(vc1)>0.5,Rdson,Roc)
SYMBOL ind -1232 -384 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lreseau1
SYMATTR Value {Lr}
SYMBOL res -992 -416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rreseau1
SYMATTR Value {Rr}
SYMBOL diode -736 -432 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value IDD
SYMBOL diode -736 -240 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value IDD
SYMBOL diode -1312 -432 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value IDD
SYMBOL diode -1312 -192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value IDD
SYMBOL voltage -1328 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi1
SYMATTR Value 0
SYMBOL voltage -1328 -384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName IDi2
SYMATTR Value 0
SYMBOL diode -1472 -656 R0
SYMATTR InstName D5
SYMATTR Value IDI
SYMBOL diode -1472 -352 R0
SYMATTR InstName D6
SYMATTR Value IDI
SYMBOL diode -672 -352 R0
SYMATTR InstName D7
SYMATTR Value IDI
SYMBOL diode -672 -656 R0
SYMATTR InstName D8
SYMATTR Value IDI
SYMBOL bv -4736 32 R0
SYMATTR InstName B2
SYMATTR Value V=I(Lreseau1)
SYMBOL voltage -4912 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 9 50 0 0 0)
SYMBOL bv -5312 -80 R0
SYMATTR InstName B3
SYMATTR Value V=V(ref)-V(mes)
SYMBOL Comparators\\LTC1843 -4448 -48 R0
SYMATTR InstName U5
SYMBOL voltage -4400 112 R0
SYMATTR InstName V3
SYMATTR Value {hyst}
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -4272 -96 R0
SYMATTR InstName U6
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -4128 32 R0
SYMATTR InstName U7
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL res -4352 -128 R0
SYMATTR InstName R5
SYMATTR Value 10K
SYMBOL voltage -896 -400 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vreseau1
SYMATTR Value SINE(0 70.71 50 0 0 0)
SYMBOL bv -4496 128 R0
SYMATTR InstName B1
SYMATTR Value V=-V(vdrive)
SYMBOL voltage -3440 -768 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vpv1
SYMATTR Value 80
SYMBOL voltage -3424 -816 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName IDpv1
SYMATTR Value 0
SYMBOL voltage -4320 -752 R0
SYMATTR InstName Valimdriv1
SYMATTR Value 10
TEXT -1440 0 Left 2 !.param Rdson=0.27 Roc=3e6 Rg=0.1 Rr=1m Lr=2.4m hyst=1 Tdead=3µ
TEXT -1440 -24 Left 2 !.tran 0 0.10 0.08 1e-6
TEXT -1440 24 Left 2 !.model IDD D(Ron=Rdson Roff=1Meg Vfwd=0)
TEXT -1440 48 Left 2 !.model IDI D(Ron=10e-4 Roff=1Meg Vfwd=0)
TEXT -4872 296 Left 7 ;Hysterisis Controller
TEXT -5536 -496 Left 7 ;Voltage sources (PV, Drive..etc)
